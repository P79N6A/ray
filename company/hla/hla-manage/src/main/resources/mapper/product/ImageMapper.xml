<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- Mybatis mapper for image  Auto generated by fms-mybatis-generator -->
<mapper namespace="com.rongyi.hla.mapper.product.ImageMapper">
    <resultMap id="image" type="com.rongyi.entity.product.Image">
        <id property="id" column="img_id" javaType="long" jdbcType="BIGINT"/>
        <result property="ownerCode" column="img_owner_code" javaType="string" jdbcType="VARCHAR"/>
        <result property="small" column="img_small" javaType="string" jdbcType="VARCHAR"/>
        <result property="big" column="img_big" javaType="string" jdbcType="VARCHAR"/>
        <result property="origin" column="img_origin" javaType="string" jdbcType="VARCHAR"/>
        <result property="defaultUrl" column="img_default_url" javaType="string" jdbcType="VARCHAR"/>
    </resultMap>

    <sql id="sqlimageColumns">
		img_.id AS img_id,
		img_.owner_code AS img_owner_code,
		img_.small AS img_small,
		img_.big AS img_big,
		img_.origin AS img_origin,
		img_.default_url AS img_default_url
	</sql>

    <select id="listByOwnerCode" parameterType="string" resultMap="image">
        SELECT
        <include refid="sqlimageColumns"/>
        FROM image img_
        WHERE img_.owner_code = #{ownerCode,jdbcType=VARCHAR}
    </select>

    <insert id="save" parameterType="com.rongyi.entity.product.Image" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO image (
			owner_code,
			small,
			big,
			origin,
			default_url
		)
        VALUES (
			#{ownerCode,jdbcType=VARCHAR},
			#{small,jdbcType=VARCHAR},
			#{big,jdbcType=VARCHAR},
			#{origin,jdbcType=VARCHAR},
			#{defaultUrl,jdbcType=VARCHAR}
		)
	</insert>

    <insert id="c " parameterType="com.rongyi.entity.product.Image" useGeneratedKeys="true" keyProperty="id">

        VALUES (
			#{ownerCode,jdbcType=VARCHAR},
			#{small,jdbcType=VARCHAR},
			#{big,jdbcType=VARCHAR},
			#{origin,jdbcType=VARCHAR},
			#{defaultUrl,jdbcType=VARCHAR}
		)
	</insert>


    <!-- 批量插入生成的兑换码 -->
    <insert id="batchSave" parameterType="java.util.List">

        <selectKey resultType="java.lang.Integer" keyProperty="id"
                   order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>

        INSERT INTO image ( owner_code, small, big, origin, default_url )
        values
        <foreach collection="list" item="item" index="index" separator=",">
            (
            #{item.ownerCode},
            #{item.small},
            #{item.big},
            #{item.origin},
            #{item.defaultUrl}
            )
        </foreach>
    </insert>


    <update id="update" parameterType="com.rongyi.entity.product.Image">
        UPDATE image
        <set>
            <if test="ownerCode != null and ownerCode != ''">owner_code = #{ownerCode,jdbcType=VARCHAR},</if>
            <if test="small != null and small != ''">small = #{small,jdbcType=VARCHAR},</if>
            <if test="big != null and big != ''">big = #{big,jdbcType=VARCHAR},</if>
            <if test="origin != null and origin != ''">origin = #{origin,jdbcType=VARCHAR},</if>
            <if test="defaultUrl != null and defaultUrl != ''">default_url = #{defaultUrl,jdbcType=VARCHAR},</if>
        </set>
        WHERE id = #{id,jdbcType=BIGINT}
    </update>

</mapper>
